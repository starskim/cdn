(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{37:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),c=a(2);function r(){Object(n.useEffect)(()=>{Object(c.a)("mounted")},[])}},38:function(e,t,a){"use strict";var n,c;a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return c})),function(e){e[e.Banned=-1]="Banned",e[e.Normal=0]="Normal",e[e.Admin=1]="Admin",e[e.SuperAdmin=2]="SuperAdmin"}(n||(n={})),function(e){e.Steve="steve",e.Alex="alex",e.Cape="cape"}(c||(c={}))},41:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return r}));var n=a(5);const c=n.css`
  cursor: pointer;
`,r=n.css`
  display: flex;
  justify-content: center;
  align-items: center;
`},429:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(31),l=a(50),s=a(37),i=a(6),u=a(38);function o(){const[e,t]=Object(n.useState)(0),[a,c]=Object(n.useState)(""),[r,l]=Object(n.useState)(u.a.Steve);return Object(n.useEffect)(()=>{if(e<=0)return void c("");(async()=>{const{hash:t,type:a}=await i.b(`/skinlib/info/${e}`);c(`${blessing.base_url}/textures/${t}`),l(a)})()},[e]),[{url:a,type:r},t]}var m=a(1),d=a(4),b=a(11),p=a(5),j=a(62),E=a(41);var f=e=>{const{player:t}=e,a=e.selected&&p.css`
      background-color: #efefef;
    `;return Object(p.jsx)("tr",{css:[E.b,a],onClick:e.onClick},Object(p.jsx)("td",null,t.pid),Object(p.jsx)("td",null,Object(p.jsx)("span",null,t.name),Object(p.jsx)(j.a,{title:Object(m.a)("user.player.edit-pname"),onClick:()=>{e.onEditName(t)}})),Object(p.jsx)("td",{className:"d-flex"},Object(p.jsx)("button",{className:"btn btn-warning",onClick:e.onReset},Object(m.a)("user.player.delete-texture")),Object(p.jsx)("button",{className:"btn btn-danger ml-2",onClick:()=>{e.onDelete(t)}},Object(m.a)("user.player.delete-player"))))},O=a(32),y=a(55),h=a.n(y);const v=O.a.tr`
  height: 64px;
`,g=Object(O.a)(h.a)`
  line-height: 2;
`;var N=()=>c.a.createElement(v,null,c.a.createElement("td",{colSpan:3},c.a.createElement(g,null))),k=a(3),w=a.n(k),x=a(72),C=a(61);const S=O.a.div`
  display: flex;
  justify-content: space-between;
  width: 80%;

  img {
    max-height: 64px;
    width: 64px;
  }
`;var A=e=>c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("h3",{className:"card-title"},Object(m.a)("general.texturePreview"))),c.a.createElement("div",{className:"card-body"},c.a.createElement(S,{className:"mb-5"},c.a.createElement("span",null,Object(m.a)("general.skin")),e.skin?c.a.createElement("img",{src:e.skin,alt:Object(m.a)("general.skin")}):c.a.createElement("span",null,Object(m.a)("user.player.texture-empty"))),c.a.createElement(S,{className:"mt-5"},c.a.createElement("span",null,Object(m.a)("general.cape")),e.cape?c.a.createElement("img",{src:e.cape,alt:Object(m.a)("general.cape")}):c.a.createElement("span",null,Object(m.a)("user.player.texture-empty")))),c.a.createElement("div",{className:"card-footer"},e.children));const P=c.a.lazy(()=>Promise.all([a.e(0),a.e(36)]).then(a.bind(null,154)));var $=e=>{const[t,a]=Object(n.useState)(!0),r=Object(x.a)("#previewer"),l=c.a.createElement("button",{className:"btn btn-default",onClick:()=>a(e=>!e)},t?Object(m.a)("user.switch2dPreview"):Object(m.a)("user.switch3dPreview")),{skin:s,cape:i,isAlex:u}=e;return r&&w.a.createPortal(t?c.a.createElement(c.a.Suspense,{fallback:c.a.createElement(C.a,null)},c.a.createElement(P,{skin:s,cape:i,isAlex:u},l)):c.a.createElement(A,{skin:s,cape:i},l),r)},R=a(13);var _=e=>{const[t,a]=Object(n.useState)(""),{score:r,cost:l,rule:s,length:u}=blessing.extra,o=r>=l;return c.a.createElement(R.a,{show:e.show,title:Object(m.a)("user.player.add-player"),onConfirm:async()=>{const{code:a,message:n,data:c}=await i.c(b.a.user.player.add(),{name:t});0===a?(d.b.success(n),e.onAdd(c)):d.b.error(n)},onClose:()=>{a(""),e.onClose()}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"new-player-name"},Object(m.a)("general.player.player-name")),c.a.createElement("input",{type:"text",className:"form-control",id:"new-player-name",value:t,onChange:e=>{a(e.target.value)}})),c.a.createElement("div",{className:"callout callout-info"},c.a.createElement("ul",{className:"m-0 p-0 pl-3"},c.a.createElement("li",null,s),c.a.createElement("li",null,u))),c.a.createElement("div",{className:`alert alert-${o?"success":"danger"}`,role:"alert"},c.a.createElement("i",{className:`icon fas fa-${o?"check":"times"}`}),c.a.createElement("span",{className:"ml-1"},Object(m.a)("user.cur-score")," ",r)))};var B=e=>{const[t,a]=Object(n.useState)(!1),[r,l]=Object(n.useState)(!1);return c.a.createElement(R.a,{show:e.show,title:Object(m.a)("user.chooseClearTexture"),onConfirm:()=>{e.onSubmit(t,r)},onClose:()=>{a(!1),l(!1),e.onClose()}},c.a.createElement("label",{className:"d-block"},c.a.createElement("input",{type:"checkbox",className:"mr-2",checked:t,onChange:e=>{a(e.target.checked)}}),Object(m.a)("general.skin")),c.a.createElement("label",{className:"d-block"},c.a.createElement("input",{type:"checkbox",className:"mr-2",checked:r,onChange:e=>{l(e.target.checked)}}),Object(m.a)("general.cape")))};t.default=Object(r.hot)(()=>{const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)(!0),[p,j]=Object(n.useState)(0),[E,O]=o(),[y,h]=o(),[v,g]=Object(n.useState)(""),[k,w]=Object(n.useState)(!1),[x,C]=Object(n.useState)(!1),S=Object(l.a)("count");Object(s.a)();const A=e=>{j(e.pid),O(e.tid_skin),h(e.tid_cape)};Object(n.useEffect)(()=>{(async()=>{r(!0);const e=await i.b("/user/player/list");t(e),1===e.length&&A(e[0]),r(!1)})()},[]);const P=async e=>{try{await Object(d.a)({title:Object(m.a)("user.deletePlayer"),text:Object(m.a)("user.deletePlayerNotice"),okButtonType:"danger"})}catch(e){return}const{code:a,message:n}=await i.a(b.a.user.player.delete(e.pid));if(0===a){d.b.success(n);const{pid:a}=e;t(e=>e.filter(e=>e.pid!==a))}else d.b.error(n)},R=()=>C(!0);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("input",{type:"text",className:"form-control",placeholder:Object(m.a)("user.typeToSearch"),onChange:e=>{g(e.target.value)}})),c.a.createElement("div",{className:"card-body p-0 table-responsive"},c.a.createElement("table",{className:"table table-hover"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{style:{width:"12%"}},"PID"),c.a.createElement("th",null,Object(m.a)("general.player.player-name")),c.a.createElement("th",{style:{width:"50%"}},Object(m.a)("user.player.operation")))),c.a.createElement("tbody",null,a?new Array(S).fill(null).map((e,t)=>c.a.createElement(N,{key:t})):0===e.length?c.a.createElement("tr",null,c.a.createElement("td",{className:"text-center",colSpan:3},Object(m.a)("general.noResult"))):e.filter(({name:e})=>e.includes(v)).map((e,a)=>c.a.createElement(f,{key:e.pid,player:e,selected:p===e.pid,onClick:()=>A(e),onEditName:()=>(async(e,a)=>{let n;try{const{value:t}=await Object(d.a)({mode:"prompt",text:Object(m.a)("user.changePlayerName"),input:e.name,validator:e=>{if(!e)return Object(m.a)("user.emptyPlayerName")}});n=t}catch(e){return}const{code:c,message:r}=await i.d(b.a.user.player.rename(e.pid),{name:n});0===c?(d.b.success(r),t(t=>(t[a]=Object.assign(Object.assign({},e),{name:n}),t.slice()))):d.b.error(r)})(e,a),onReset:R,onDelete:P}))))),c.a.createElement("div",{className:"card-footer"},c.a.createElement("button",{className:"btn btn-primary",onClick:()=>w(!0)},c.a.createElement("i",{className:"fas fa-plus mr-1"}),c.a.createElement("span",null,Object(m.a)("user.player.add-player"))))),c.a.createElement($,{skin:E.url,cape:y.url,isAlex:E.type===u.a.Alex}),c.a.createElement(_,{show:k,onAdd:e=>{t(t=>[...t,e])},onClose:()=>w(!1)}),c.a.createElement(B,{show:x,onSubmit:async(e,a)=>{if(!e&&!a)return void d.b.warning(Object(m.a)("user.noClearChoice"));const n=new URLSearchParams;e&&n.append("skin","true"),a&&n.append("cape","true");const{code:c,message:r}=await i.a(`${b.a.user.player.clear(p)}?${n}`);0===c?(d.b.success(r),e&&O(0),a&&h(0),t(t=>{const n=t.findIndex(e=>e.pid===p),c=Object.assign({},t[n]);return e&&(c.tid_skin=0),a&&(c.tid_cape=0),t[n]=c,t.slice()})):d.b.error(r)},onClose:()=>C(!1)}))})},50:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0);function c(e,t){const[a,c]=Object(n.useState)(t);return Object(n.useEffect)(()=>{c(blessing.extra[e])},[]),a}},61:function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(1);t.a=()=>c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("h3",{className:"card-title"},c.a.createElement("span",null,Object(r.a)("general.texturePreview"))))),c.a.createElement("div",{className:"card-body"}))},62:function(e,t,a){"use strict";var n=a(0),c=a.n(n);t.a=e=>c.a.createElement("a",{href:"#",title:e.title,className:"ml-2",onClick:e.onClick},c.a.createElement("i",{className:"fas fa-edit"}))},72:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0);function c(e){const t=Object(n.useRef)(null);return Object(n.useEffect)(()=>{const a=document.querySelector(e),n=document.createElement("div");return t.current=n,a.appendChild(n),()=>{a.removeChild(n),t.current=null}},[]),t.current}}}]);