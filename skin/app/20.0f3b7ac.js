(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{138:function(e,a,t){"use strict";var n=t(0),l=t.n(n),c=t(1),r=t(139),i=t.n(r);a.a=e=>{var a;const t=Object(n.useRef)(null);return l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"select-file"},Object(c.a)("skinlib.upload.select-file")),l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"custom-file"},l.a.createElement("input",{type:"file",className:"custom-file-input",id:"select-file",accept:e.accept,title:Object(c.a)("skinlib.upload.select-file"),ref:t,onChange:e.onChange}),l.a.createElement("label",{className:`custom-file-label ${i.a.label}`},null===(a=e.file)||void 0===a?void 0:a.name)),l.a.createElement("div",{className:"input-group-append"},l.a.createElement("button",{className:"btn btn-default",onClick:()=>{t.current.click()}},Object(c.a)("skinlib.upload.select-file")))))}},139:function(e,a,t){var n=t(12),l=t(140);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var c={insert:"head",singleton:!1},r=(n(e.i,l,c),l.locals?l.locals:{});e.exports=r},140:function(e,a,t){"use strict";t.r(a);var n=t(9),l=t.n(n)()(!1);l.push([e.i,".label__3djMO::after{display:none}",""]),l.locals={label:"label__3djMO"},a.default=l},29:function(e,a,t){a.hot=function(e){return e}},436:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(4),r=t.n(c),i=t(29),s=t(1),o=t(51),u=t(56),m=t(5),d=t(3);function b(e,a,t,n,l){for(var c=e.getImageData(a,t,n,l),r=0;r<n;r++)for(var i=0;i<l;i++){var s=4*(r+i*n);if(255!==c.data[s+3])return!0}return!1}function p(e){return e/64}function f(e,a){var t=p(a),n=function(a,n,l,c,r,i,s){return function(e,a,t,n,l,c,r,i){var s=e.getImageData(a,t,n,l);if(i)for(var o=0;o<l;o++)for(var u=0;u<n/2;u++){var m=4*(u+o*n),d=4*(n-u-1+o*n),b=s.data[m],p=s.data[m+1],f=s.data[m+2],v=s.data[m+3],h=s.data[d],g=s.data[d+1],E=s.data[d+2],j=s.data[d+3];s.data[m]=h,s.data[m+1]=g,s.data[m+2]=E,s.data[m+3]=j,s.data[d]=b,s.data[d+1]=p,s.data[d+2]=f,s.data[d+3]=v}e.putImageData(s,c,r)}(e,a*t,n*t,l*t,c*t,r*t,i*t,s)};!function(e,a){if(!b(e,0,0,a,a/2)){var t=p(a),n=function(a,n,l,c){return e.clearRect(a*t,n*t,l*t,c*t)};n(40,0,8,8),n(48,0,8,8),n(32,8,8,8),n(40,8,8,8),n(48,8,8,8),n(56,8,8,8)}}(e,a),n(4,16,4,4,20,48,!0),n(8,16,4,4,24,48,!0),n(0,20,4,12,24,52,!0),n(4,20,4,12,20,52,!0),n(8,20,4,12,16,52,!0),n(12,20,4,12,28,52,!0),n(44,16,4,4,36,48,!0),n(48,16,4,4,40,48,!0),n(40,20,4,12,40,52,!0),n(44,20,4,12,36,52,!0),n(48,20,4,12,32,52,!0),n(52,20,4,12,44,52,!0)}function v(e,a,t){const n=e.getImageData(a,t,1,1);return 0===n.data[0]&&0===n.data[1]&&0===n.data[2]}function h(e){return new Promise(a=>{const t=new Image;t.src=e,t.onload=()=>{if(t.width!==t.height)return void a(!1);const e=document.createElement("canvas");!function(e,a){var t=!1;if(a.width!==a.height){if(a.width!==2*a.height)throw new Error("Bad skin size: "+a.width+"x"+a.height);t=!0}var n=e.getContext("2d");if(t){var l=a.width;e.width=l,e.height=l,n.clearRect(0,0,l,l),n.drawImage(a,0,0,l,l/2),f(n,l)}else e.width=a.width,e.height=a.height,n.clearRect(0,0,a.width,a.height),n.drawImage(a,0,0,e.width,e.height)}(e,t);const n=e.width/64,l=e.getContext("2d");if(l){for(let e=46*n;e<48*n;e+=1)for(let t=52*n;t<64*n;t+=1)if(!v(l,e,t))return void a(!1);a(!0)}else a(!1)}})}var g=t(138),E=t(57);const j=l.a.lazy(()=>Promise.all([t.e(3),t.e(2)]).then(t.bind(null,403)));a.default=Object(i.hot)(()=>{var e;const[a,t]=Object(n.useState)(""),[c,i]=Object(n.useState)("steve"),[b,p]=Object(n.useState)(!1),[f,v]=Object(n.useState)(!1),[w,O]=Object(n.useState)(null),[N,k]=Object(n.useState)(""),y=Object(o.a)("rule"),x=Object(o.a)("contentPolicy"),C=Object(o.a)("privacyNotice"),S=Object(o.a)("award"),I=Object(o.a)("scorePublic"),_=Object(o.a)("scorePrivate"),F=Object(o.a)("closetItemCost"),P=Object(u.a)("#previewer"),R=e=>{i(e.target.value)},D=b?_:I,M=(~~((null!==(e=null==w?void 0:w.size)&&void 0!==e?e:0)/1024)||1)*D+F;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"card card-primary"},l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"texture-name"},Object(s.a)("skinlib.upload.texture-name")),l.a.createElement("input",{className:"form-control",id:"texture-name",type:"text",placeholder:y,value:a,onChange:e=>{t(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,Object(s.a)("skinlib.upload.texture-type")),l.a.createElement("br",null),l.a.createElement("label",{className:"mr-4"},l.a.createElement("input",{type:"radio",className:"mr-1",name:"type",value:"steve",checked:"steve"===c,onChange:R}),"Steve"),l.a.createElement("label",{className:"mr-4"},l.a.createElement("input",{type:"radio",className:"mr-1",name:"type",value:"alex",checked:"alex"===c,onChange:R}),"Alex"),l.a.createElement("label",{className:"mr-4"},l.a.createElement("input",{type:"radio",className:"mr-1",name:"type",value:"cape",checked:"cape"===c,onChange:R}),Object(s.a)("general.cape"))),l.a.createElement(g.a,{file:w,accept:"image/png, image/x-png",onChange:async e=>{const n=e.target.files,[l]=n;if(l){O(l),!a&&l.name.endsWith(".png")&&t(l.name.slice(0,l.name.length-4));const e=URL.createObjectURL(l);k(e),"cape"!==c&&i(await h(e)?"alex":"steve")}}}),x&&l.a.createElement("div",{className:"callout callout-warning",dangerouslySetInnerHTML:{__html:x}})),l.a.createElement("div",{className:"card-footer"},l.a.createElement("div",{className:"container px-0 d-flex justify-content-between"},l.a.createElement("label",{className:"mt-2",htmlFor:"is-private",title:Object(s.a)("skinlib.upload.privacy-notice")},l.a.createElement("input",{type:"checkbox",id:"is-private",className:"mr-1",checked:b,onChange:e=>{p(e.target.checked)}}),Object(s.a)("skinlib.upload.set-as-private")),l.a.createElement("button",{className:"btn btn-success",disabled:f,onClick:async()=>{if(!w)return void d.b.error(Object(s.a)("skinlib.emptyUploadFile"));if(!a)return void d.b.error(Object(s.a)("skinlib.emptyTextureName"));if("image/png"!==w.type&&"image/x-png"!==w.type)return void d.b.error(Object(s.a)("skinlib.fileExtError"));const e=new FormData;e.append("name",a),e.append("type",c),e.append("file",w,w.name),e.append("public",(!b).toString()),v(!0);const{code:t,message:n,data:{tid:l}={tid:0}}=await m.c("/skinlib/upload",e);if(v(!1),0===t)window.location.href=`${blessing.base_url}/skinlib/show/${l}`;else if(2===t)try{await Object(d.a)({mode:"confirm",text:n,okButtonText:Object(s.a)("user.viewInSkinlib")}),window.location.href=`${blessing.base_url}/skinlib/show/${l}`}catch(e){}else d.b.error(n)}},f?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin mr-1"}),l.a.createElement("span",null,Object(s.a)("skinlib.uploading"))):Object(s.a)("skinlib.upload.button"))),w&&l.a.createElement("div",{className:"callout callout-success mt-3"},l.a.createElement("p",null,Object(s.a)("skinlib.upload.cost",{score:M}))),b&&l.a.createElement("div",{className:"callout callout-info mt-3"},l.a.createElement("p",null,C)),!b&&S>0&&l.a.createElement("div",{className:"callout callout-success mt-3"},l.a.createElement("p",null,Object(s.a)("skinlib.upload.award",{score:S}))))),r.a.createPortal(l.a.createElement(l.a.Suspense,{fallback:l.a.createElement(E.a,null)},l.a.createElement(j,{skin:"cape"!==c?N:void 0,cape:"cape"===c?N:void 0,isAlex:"alex"===c})),P))})},51:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));var n=t(0);function l(e,a){const[t,l]=Object(n.useState)(a);return Object(n.useEffect)(()=>{l(blessing.extra[e])},[]),t}},56:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));var n=t(0);function l(e){const a=Object(n.useMemo)(()=>document.createElement("div"),[]);return Object(n.useEffect)(()=>{const t=document.querySelector(e);return t.appendChild(a),()=>{t.removeChild(a)}},[]),a}},57:function(e,a,t){"use strict";var n=t(0),l=t.n(n),c=t(1);a.a=()=>l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("h3",{className:"card-title"},l.a.createElement("span",null,Object(c.b)("general.texturePreview"))))),l.a.createElement("div",{className:"card-body"}))}}]);