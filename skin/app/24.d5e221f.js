(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{431:function(e,t,a){"use strict";a.r(t);var r=a(104),s=(a(103),a(58)),o=a(84),n=a(59),l=a(3),i={name:"ReportsManagement",components:{VueGoodTable:r.a},mixins:[n.a,s.a,o.a],props:{baseUrl:{type:String,default:blessing.base_url}},data(){return{reports:[],columns:[{field:"id",type:"number",hidden:!0},{field:"tid",label:this.$t("report.tid"),type:"number"},{field:"uploader",label:this.$t("skinlib.show.uploader")},{field:"reporter",label:this.$t("report.reporter")},{field:"reason",label:this.$t("report.reason"),sortable:!1,width:"23%"},{field:"status",label:this.$t("report.status-title")},{field:"report_at",label:this.$t("report.time"),globalSearchDisabled:!0},{field:"ops",label:this.$t("admin.operationsTitle"),globalSearchDisabled:!0}]}},mounted(){this.sortField="report_at",this.sortType="desc",this.fetchData()},methods:{async fetchData(){const{data:e,totalRecords:t}=await this.$http.get("/admin/reports/list",this.serverParams);this.totalRecords=t,this.reports=e},deleteTexture(e){this.resolve(e,"delete")},ban(e){this.resolve(e,"ban")},reject(e){this.resolve(e,"reject")},async resolve(e,t){const{code:a,message:r,data:s}=await this.$http.post("/admin/reports",{id:e.id,action:t});0===a?(l.b.success(r),e.status=s.status):l.b.error(r)}}},d=a(71),c=Object(d.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},[a("vue-good-table",{attrs:{mode:"remote",rows:e.reports,"total-rows":e.totalRecords||e.reports.length,columns:e.columns,"search-options":e.tableOptions.search,"pagination-options":e.tableOptions.pagination,"style-class":"vgt-table striped"},on:{"on-page-change":e.onPageChange,"on-sort-change":e.onSortChange,"on-search":e.onSearch,"on-per-page-change":e.onPerPageChange},scopedSlots:e._u([{key:"table-row",fn:function(t){return["tid"===t.column.field?a("span",[e._v("\n        "+e._s(t.formattedRow[t.column.field])+"\n        "),a("a",{attrs:{href:e.baseUrl+"/skinlib/show/"+t.row.tid}},[e._v(e._s(e.$t("report.check")))]),e._v(" "),a("a",{attrs:{href:"#"},on:{click:function(a){return e.deleteTexture(t.row)}}},[e._v("\n          "+e._s(e.$t("report.delete"))+"\n        ")])]):"uploader"===t.column.field?a("span",[e._v("\n        "+e._s(t.row.uploaderName)+" (UID: "+e._s(t.row.uploader)+")\n        "),a("a",{attrs:{href:"#"},on:{click:function(a){return e.ban(t.row)}}},[e._v("\n          "+e._s(e.$t("report.ban"))+"\n        ")])]):"reporter"===t.column.field?a("span",[e._v("\n        "+e._s(t.row.reporterName)+" (UID: "+e._s(t.row.reporter)+")\n      ")]):"status"===t.column.field?a("span",[e._v("\n        "+e._s(e.$t("report.status."+t.row.status))+"\n      ")]):"ops"===t.column.field?a("span",[a("button",{staticClass:"btn btn-default",on:{click:function(a){return e.reject(t.row)}}},[e._v("\n          "+e._s(e.$t("report.reject"))+"\n        ")])]):a("span",[e._v("\n        "+e._s(t.formattedRow[t.column.field])+"\n      ")])]}}])})],1)}),[],!1,null,null,null);t.default=c.exports},58:function(e,t,a){"use strict";var r=a(44);t.a=r.default.extend({data(){return{tableOptions:{search:{enabled:!0,placeholder:this.$t("vendor.datatable.search")},pagination:{enabled:!0,nextLabel:this.$t("vendor.datatable.next"),prevLabel:this.$t("vendor.datatable.prev"),rowsPerPageLabel:this.$t("vendor.datatable.rowsPerPage"),allLabel:this.$t("vendor.datatable.all"),ofLabel:this.$t("vendor.datatable.of")}}}}})},59:function(e,t,a){"use strict";var r=a(44),s=a(2);t.a=r.default.extend({mounted(){s.a("mounted",{el:this.$root.$options.el})}})},84:function(e,t,a){"use strict";var r=a(44);t.a=r.default.extend({data:()=>({columns:[{field:"id"}],totalRecords:0,serverParams:{sortField:"id",sortType:"asc",page:1,perPage:10,search:""}}),created(){this.serverParams.sortField=this.columns[0].field},methods:{fetchData:()=>Promise.resolve(),onPageChange(e){this.serverParams.page=e.currentPage,this.fetchData()},onPerPageChange(e){this.serverParams.perPage=e.currentPerPage,this.fetchData()},onSortChange([e]){this.serverParams.sortType=e.type,this.serverParams.sortField=e.field,this.fetchData()},onSearch(e){this.serverParams.search=e.searchTerm,this.fetchData()}}})}}]);